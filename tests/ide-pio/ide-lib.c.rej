***************
*** 277,283 ****
   *	@drive: drive to consider
   *	@mode_wanted: preferred mode
   *	@max_mode: highest allowed mode
-  *	@d: PIO data
   *
   *	This routine returns the recommended PIO settings for a given drive,
   *	based on the drive->id information and the ide_pio_blacklist[].
--- 277,282 ----
   *	@drive: drive to consider
   *	@mode_wanted: preferred mode
   *	@max_mode: highest allowed mode
   *
   *	This routine returns the recommended PIO settings for a given drive,
   *	based on the drive->id information and the ide_pio_blacklist[].
***************
*** 286,292 ****
   *	This is used by most chipset support modules when "auto-tuning".
   */
  
- u8 ide_get_best_pio_mode (ide_drive_t *drive, u8 mode_wanted, u8 max_mode, ide_pio_data_t *d)
  {
  	int pio_mode;
  	struct hd_driveid* id = drive->id;
--- 285,291 ----
   *	This is used by most chipset support modules when "auto-tuning".
   */
  
+ u8 ide_get_best_pio_mode (ide_drive_t *drive, u8 mode_wanted, u8 max_mode)
  {
  	int pio_mode;
  	struct hd_driveid* id = drive->id;
***************
*** 335,343 ****
  	if (pio_mode > max_mode)
  		pio_mode = max_mode;
  
- 	if (d)
- 		d->pio_mode = pio_mode;
- 
  	return pio_mode;
  }
  
--- 334,339 ----
  	if (pio_mode > max_mode)
  		pio_mode = max_mode;
  
  	return pio_mode;
  }
  
